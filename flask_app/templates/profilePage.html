<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
</head>
<body class="bg-secondary">
        <nav class="navbar  bg-dark">
                 <a class="btn btn-outline-primary my-2 mx-5" href="/dashboardPage">Dashboard</a>
                <a class="btn btn-outline-primary my-2 mx-5" href="/add_magazine">Add Magazine</a>
                <a class="btn btn-outline-primary my-2 mx-5" href="/logout">LogOut</a>
        </nav>
        <div class="w-100 my-5 d-flex">
         <div class="w-75 mx-4 card">
         
        <form action="/update_user" method="POST" class="w-25">
                <h1 >Update</h1>
                {% with messages = get_flashed_messages(category_filter=["UpdateEmailExist"]) %}
                        {% if messages %}
                            {% for msg in messages %}
                                <small class="form-text text-danger">{{msg}}</small>
                            {% endfor %}
                        {% endif %}
                {% endwith %}
                <div class="form-group">
                    <label for="first_name">First Name</label>
                    <input type="text" name="first_name" class="form-control" value="{{loggedUser.first_name}}">
                        {% with messages = get_flashed_messages(category_filter=["firstUpdate"]) %}
                            {% if messages %}
                                {% for msg in messages %}
                                    <small class="form-text text-danger">{{msg}}</small>
                                {% endfor %}
                            {% endif %}
                        {% endwith %}
                </div>
                <div class="form-group">
                    <label for="last_name">Last Name</label>
                    <input type="text" name="last_name" class="form-control" value="{{loggedUser.last_name}}">
                    {% with messages = get_flashed_messages(category_filter=["lastUpdate"]) %}
                            {% if messages %}
                                {% for msg in messages %}
                                    <small class="form-text text-danger">{{msg}}</small>
                                {% endfor %}
                            {% endif %}
                    {% endwith %}
                </div>
                <div class="form-group">
                    <label for="email">Email address</label>
                    <input type="email" class="form-control" name="email" aria-describedby="emailHelp" value="{{loggedUser.email}}">
                    {% with messages = get_flashed_messages(category_filter=["emailUpdate"]) %}
                            {% if messages %}
                                {% for msg in messages %}
                                    <small class="form-text text-danger">{{msg}}</small>
                                {% endfor %}
                            {% endif %}
                    {% endwith %}
                </div>
                <button type="submit" class="btn btn-primary my-2">Update</button>
        </form>
    </div>
    <div>
                <div class="w-75 mx-4 border border-3 bg-info">
                    <h1>User`s Magazine</h1>
                    <ul>
                        {% for magazine in all_magazines %}
                            <li>{{magazine.title}} <a href="/delete_magazine/{{magazine.id}}">Delete</a></li>
                            <p>{{magazine.subscribers_num}} subscribers</p>
                        {% endfor %}
                    </ul>
                </div>
            </div>
            </div>


</body>
</html>